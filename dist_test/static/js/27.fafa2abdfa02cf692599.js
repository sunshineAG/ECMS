webpackJsonp([27],{1208:function(t,n,e){e(2186),e(2185);var a=e(20)(e(1612),e(2100),"data-v-304de3ae",null);a.options.__file="D:\\baozWork\\liejing\\js\\ECMS\\src\\view\\customerManage\\customerUnique.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] customerUnique.vue: functional components are not supported with templates, they should use render functions."),t.exports=a.exports},1252:function(t,n){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxKSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDxlbGxpcHNlIGZpbGw9IiNGNUY1RjUiIGN4PSIzMiIgY3k9IjMzIiByeD0iMzIiIHJ5PSI3Ii8+CiAgICA8ZyBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0iI0Q5RDlEOSI+CiAgICAgIDxwYXRoIGQ9Ik01NSAxMi43Nkw0NC44NTQgMS4yNThDNDQuMzY3LjQ3NCA0My42NTYgMCA0Mi45MDcgMEgyMS4wOTNjLS43NDkgMC0xLjQ2LjQ3NC0xLjk0NyAxLjI1N0w5IDEyLjc2MVYyMmg0NnYtOS4yNHoiLz4KICAgICAgPHBhdGggZD0iTTQxLjYxMyAxNS45MzFjMC0xLjYwNS45OTQtMi45MyAyLjIyNy0yLjkzMUg1NXYxOC4xMzdDNTUgMzMuMjYgNTMuNjggMzUgNTIuMDUgMzVoLTQwLjFDMTAuMzIgMzUgOSAzMy4yNTkgOSAzMS4xMzdWMTNoMTEuMTZjMS4yMzMgMCAyLjIyNyAxLjMyMyAyLjIyNyAyLjkyOHYuMDIyYzAgMS42MDUgMS4wMDUgMi45MDEgMi4yMzcgMi45MDFoMTQuNzUyYzEuMjMyIDAgMi4yMzctMS4zMDggMi4yMzctMi45MTN2LS4wMDd6IiBmaWxsPSIjRkFGQUZBIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"},1253:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"dataStatus",props:["width","height","material"],components:{},data:function(){return{}}}},1254:function(t,n,e){n=t.exports=e(15)(!1),n.push([t.i,"\n.imgBg[data-v-6c09838e]{\n    opacity:1;\n    text-align:center;\n    position:relative;\n}\n.text[data-v-6c09838e]{\n    position:absolute;\n    left:50%;\n    bottom:44px;\n    color:#ccc;\n    transform: translateX(-50%);\n}\n.matText[data-v-6c09838e]{\n    position:absolute;\n    left:50%;\n    bottom:86px;\n    color:#00000073;\n    transform: translateX(-50%);\n}\n",""])},1255:function(t,n,e){e(1257);var a=e(20)(e(1253),e(1256),"data-v-6c09838e",null);a.options.__file="D:\\baozWork\\liejing\\js\\ECMS\\src\\components\\pageConfig\\dataStatus.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] dataStatus.vue: functional components are not supported with templates, they should use render functions."),t.exports=a.exports},1256:function(t,n,e){t.exports={render:function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"imgBg"},[a("svg",{staticStyle:{"text-align":"center"},attrs:{width:t.width,height:t.height}},[a("image",{attrs:{"xlink:href":e(1252),width:"100%"}})]),t._v(" "),t.material?t._e():a("span",{staticClass:"text"},[t._v("暂无数据")]),t._v(" "),t.material?a("span",{staticClass:"matText"},[t._v("暂不支持")]):t._e()])},staticRenderFns:[]},t.exports.render._withStripped=!0},1257:function(t,n,e){var a=e(1254);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(16)("4232382d",a,!1)},1612:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e(1255),s=e.n(a),i=(e(94),e(93));n.default={name:"",components:{dataStatus:s.a},data:function(){return{sheight:"calc(100vh - 234px)",locale:{filterConfirm:"",filterReset:"",emptyText:""},checkAll:!1,loading:!1,selectedRowKeys:[],queryForm:{searchName:""},custmorIndexFlg:0,custmorList:[],customerList:[],columns:[{title:"所属微信号",dataIndex:"nickname",width:150,align:"center",scopedSlots:{customRender:"nickname"}},{title:"部门",dataIndex:"name",align:"center",width:150},{title:"客户经理",dataIndex:"user_name",width:250,align:"center",scopedSlots:{customRender:"user_name"}},{title:"添加好友日期",dataIndex:"agree_on",width:250,align:"center"},{title:"上次对话时间",dataIndex:"last_msg_time",width:250,align:"center"},{title:"操作",dataIndex:"action",width:250,align:"center",scopedSlots:{customRender:"action"}}],custmPage:1,page_size:20,page:1,total:0,listTotal:0,listTotalShow:"13",userSelect:""}},computed:{},mounted:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},updated:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},beforeCreate:function(){},methods:{searchName:function(){this.refresh()},getRobotList:function(t,n){console.log(n),this.userSelect=n.username,this.total=parseInt(n.count),this.customerList=n.assistant,this.selectedRowKeys=[],this.custmorIndexFlg=t,this.checkAll=!1},deleteUser:function(t){var n=this,e=this;t?(this.checkAll=!1,this.selectedRowKeys=[],this.selectedRowKeys.push(t.id),this.deletFn(this.userSelect,t.username,!0)):this.customerList.forEach(function(t){n.selectedRowKeys.forEach(function(a,s){t.id===a&&(++s,e.deletFn(n.userSelect,t.username,s===n.customerList.length))})})},deletFn:function(t,n,e){var a=this;i.isOfflineRobot(n,this.$store.state.user.offlineRobot)&&this.$store.commit("user/setRobotStatus","2");var s={cmd:2047,fromClientId:this.$store.state.user.user.user_id,toClientId:n,cmdData:{username:t}};this.$ws.sendMsgFun(s),e&&(this.$ws.cmd2047=function(n){4==n.status?(a.checkAll=!1,a.refresh(t),a.$message.info("删除成功",2)):3==n.status?(a.$message.warning(n.callbackMsg,2),a.refresh(t)):1!=n.status&&(a.$message.warning(n.callbackMsg,2),a.refresh(t))},this.checkAll=!1,this.selectedRowKeys=[])},checkedAll:function(){var t=this;this.checkAll?this.selectedRowKeys=[]:(this.selectedRowKeys=[],this.customerList.forEach(function(n){t.selectedRowKeys.push(n.id)})),this.checkAll=!this.checkAll},changeCustm:function(t){this.custmPage=t,this.refresh()},onSelectChange:function(t){this.selectedRowKeys=t,t.length<this.customerList.length?this.checkAll=!1:this.checkAll=!0},onChangea:function(t,n){this.page=t,this.page_size=n,this.selectedRowKeys=[]},onShowSizeChange:function(t,n){this.page=1,this.page_size=n,this.selectedRowKeys=[]},refresh:function(t){var n=this;this.$axios({method:"POST",url:"/index.php?r=uc/customer/re-check",data:{p:this.custmPage,n:10,search:this.queryForm.searchName}}).then(function(e){var a=e.data;if(1===a.status){var s=n;n.custmorList=a.data.list,n.listTotal=parseInt(a.data.count),n.customerList=[],!t&&n.custmorList.length?(n.customerList=n.custmorList[0].assistant,n.userSelect=n.custmorList[0].username):(n.customerList=[],n.custmorList.forEach(function(n){n.username===t&&(s.customerList=n.assistant)}))}})},imgExists:function(t){console.log("imgLoadError");var n=this.$store.state.user.user.default_url,e=new Image;e.onload=function(){(e.filesize>0||e.width>0&&e.height>0)&&(t.target.src=n,e=null)},e.src=n}},created:function(){this.refresh()},beforeDestroy:function(){window.removeEventListener("resize")}}},1704:function(t,n,e){n=t.exports=e(15)(!1),n.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    /*.unique-content-right .ant-checkbox + span,.unique-content-right .ant-checkbox-wrapper + span{*/\n        /*padding-left:0;*/\n    /*}*/\n.searchNav .ant-input-suffix{\n        padding:0;\n}\n    /*.unique-content-right .ant-tabs-bar {*/\n\t\t/*border-bottom: 10px solid #f0f2f5;*/\n\t\t/*margin-bottom: 0;*/\n\t/*}*/\n\t/*.unique-content-right .ant-table-body{*/\n\t\t/*padding-top: 42px;*/\n    \t/*!* padding-bottom: 50px; *!*/\n\t/*}*/\n\t/*.unique-content-right .ant-table-header{*/\n\t\t/*overflow-y: hidden !important;*/\n\t\t/*overflow-x:hidden !important;*/\n\t\t/*position: absolute;*/\n\t\t/*margin-bottom: -10px;*/\n\t\t/*padding-bottom: 0px;*/\n\t\t/*top: 0;*/\n\t\t/*width: 100%;*/\n\t\t/*height: 42px;*/\n\t\t/*z-index: 9;*/\n\t\t/*background:rgba(242,242,242,.7);*/\n\t/*}*/\n\t/*.unique-content-right .ant-table-thead > tr > th {*/\n\t\t/*background:none;*/\n        /*border-bottom:none;*/\n\t/*}*/\n    /*.unique-content-right .ant-table-thead > tr > th,.customer-list .ant-table-tbody > tr > td {*/\n        /*padding: 10px;*/\n    /*}*/\n.bg-row-gray{\n        background:#f2f2f2;\n}\n",""])},1705:function(t,n,e){n=t.exports=e(15)(!1),n.push([t.i,"\n.unique-content-left[data-v-304de3ae] {\n  width: 220px;\n  float: left;\n  height: calc(100vh - 182px);\n  overflow: hidden;\n}\n.unique-content-right[data-v-304de3ae] {\n  background: #fff;\n  height: calc(100vh - 182px);\n  width: calc(100% - 220px);\n  margin-top: 10px;\n  float: left;\n  position: relative;\n}\n.searchNav[data-v-304de3ae] {\n  background: #fff;\n  height: 60px;\n  line-height: 60px;\n  padding: 14px 20px;\n}\n.searchNav[data-v-304de3ae]::after {\n  display: block;\n  content: '';\n  height: 0;\n  visibility: hidden;\n  clear: both;\n}\n.searchInput[data-v-304de3ae] {\n  width: 300px;\n  float: left;\n}\n.upload[data-v-304de3ae] {\n  float: right;\n}\n.leftTitle[data-v-304de3ae] {\n  width: 210px;\n  padding-left: 20px;\n  height: 58px;\n  line-height: 58px;\n  vertical-align: middle;\n  background: #101010;\n  color: #fff;\n  margin-top: 10px;\n}\n.leftTitle .avatar[data-v-304de3ae] {\n  font-size: 18px;\n  text-align: center;\n  vertical-align: middle;\n  margin-right: 10px;\n  width: 30px;\n  height: 30px;\n  line-height: 30px;\n  border-radius: 30px;\n  border: 1px solid #fff;\n}\n.leftTitle .titleText[data-v-304de3ae] {\n  vertical-align: middle;\n}\n.custmorList[data-v-304de3ae] {\n  width: 210px;\n  background: #f9f9f9;\n  max-height: 700px;\n  position: relative;\n  overflow-y: auto;\n  overflow-x: hidden;\n  height: calc(100vh - 280px);\n}\n.custmorList .custmorIndex[data-v-304de3ae] {\n  height: 54px;\n  line-height: 54px;\n  padding: 6px;\n  cursor: pointer;\n}\n.custmorList .custmorIndex .custmorAvatar[data-v-304de3ae] {\n  margin-right: 12px;\n  width: 40px;\n  height: 40px;\n  border-radius: 3px;\n  float: left;\n}\n.custmorList .custmorIndex .custmorInfo[data-v-304de3ae] {\n  float: left;\n  width: 120px;\n}\n.custmorList .custmorIndex .custmorInfo p[data-v-304de3ae] {\n  font-size: 12px;\n  height: 20px;\n  margin: 0;\n  padding: 0;\n  line-height: 20px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.custmorList .custmorIndex[data-v-304de3ae]:hover {\n  background: #f0f0f0;\n}\n.custmorList .custmorIndex[data-v-304de3ae]::after {\n  display: block;\n  height: 0;\n  content: '';\n  clear: both;\n  visibility: hidden;\n}\n.custmorList .custmorIndex-active[data-v-304de3ae] {\n  position: relative;\n  background: #bfbfbf;\n  color: #fff;\n}\n.custmorList .custmorIndex-active[data-v-304de3ae]:hover {\n  background: #bfbfbf;\n}\n.stausPage[data-v-304de3ae] {\n  position: absolute;\n  left: 50%;\n  top: 200px;\n  z-index: 999;\n  transform: translate(-50%, 0);\n}\n.customrPage[data-v-304de3ae] {\n  background: #fff;\n  width: 210px;\n  /*height:40px;*/\n  line-height: 40px;\n  position: absolute;\n  white-space: nowrap;\n  overflow-x: auto;\n  overflow-y: inherit;\n}\n.label[data-v-304de3ae] {\n  border: 1px dashed #2686d4;\n  border-radius: 10px;\n  width: 60px;\n  font-size: 12px;\n  padding: 2px 6px;\n  cursor: pointer;\n}\n.bottomPage[data-v-304de3ae] {\n  width: 100%;\n  background: #ffffff;\n  height: 50px;\n  padding: 8px 34px 0 0;\n}\n.bottomPage[data-v-304de3ae]::after {\n  display: block;\n  clear: both;\n  height: 0;\n  content: '';\n  visibility: hidden;\n}\n",""])},2100:function(t,n,e){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"customer-unique"},[e("div",{staticClass:"searchNav"},[e("a-input-search",{staticClass:"searchInput",attrs:{placeholder:"请输入需要查询的微信昵称/备注名",maxlength:"15",enterButton:""},on:{search:t.searchName},model:{value:t.queryForm.searchName,callback:function(n){t.$set(t.queryForm,"searchName",n)},expression:"queryForm.searchName"}}),t._v(" "),e("a-button",{staticClass:"upload",attrs:{type:"primary"},on:{click:t.refresh}},[t._v("刷新")])],1),t._v(" "),e("div",{staticClass:"uniqueContent"},[e("div",{staticClass:"unique-content-left"},[e("div",{staticClass:"leftTitle"},[e("a-icon",{staticClass:"avatar",attrs:{type:"team"}}),t._v(" "),e("span",{staticClass:"titleText"},[t._v("重复客户（重复数）")])],1),t._v(" "),e("div",{staticClass:"custmorList"},[e("div",{staticStyle:{"min-hieght":"600px"}},t._l(t.custmorList,function(n,a){return e("div",{key:a,class:[t.custmorIndexFlg===a?"custmorIndex custmorIndex-active":"custmorIndex"],on:{click:function(e){return t.getRobotList(a,n)}}},[e("img",{staticClass:"custmorAvatar",attrs:{src:n.avatar_url,alt:""}}),t._v(" "),e("div",{staticClass:"custmorInfo"},[e("p",{attrs:{title:n.nickname}},[t._v(t._s(n.nickname))]),t._v(" "),e("p",[t._v("（ "+t._s(n.count)+" ）")])])])}),0)]),t._v(" "),e("div",{staticClass:"customrPage"},[e("span",{staticStyle:{"padding-left":"3px"}},[t._v("共"+t._s(t.listTotal)+"个")]),t._v(" "),e("a-pagination",{staticStyle:{width:"70px",display:"inline-block","vertical-align":"middle"},attrs:{simple:"",total:t.listTotal,size:"small"},on:{change:t.changeCustm}})],1)]),t._v(" "),e("div",{staticClass:"unique-content-right"},[e("a-table",{attrs:{columns:t.columns,rowClassName:function(t,n){return n%2==0?"":"bg-row-gray"},dataSource:t.customerList,pagination:!1,loading:t.loading,locale:t.locale,type:"checkbox",rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},rowKey:function(t){return t.id},scroll:{y:t.sheight}},scopedSlots:t._u([{key:"nickname",fn:function(n,a,s){return[e("div",{staticClass:"tel"},[e("img",{staticStyle:{width:"30px",height:"30px","border-radius":"100%"},attrs:{src:a.avatar_url},on:{error:function(n){return t.imgExists(n)}}}),t._v(" "),e("span",[t._v("\n                           "+t._s(n)+"\n                        ")])])]}},{key:"user_name",fn:function(n,a,s){return[e("div",{staticClass:"tel"},[e("img",{staticStyle:{width:"30px",height:"30px","border-radius":"100%"},attrs:{src:a.avatar},on:{error:function(n){return t.imgExists(n)}}}),t._v(" "),e("span",[t._v("\n                            "+t._s(n)+"\n                        ")])])]}},{key:"action",fn:function(n,a,s){return[e("div",{staticClass:"tel"},[e("a-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(n){return t.deleteUser(a)}}},[e("span",{staticStyle:{cursor:"pointer"}},[t._v(" 删除")])])],1)]}}]),model:{value:t.custmPage,callback:function(n){t.custmPage=n},expression:"custmPage"}}),t._v(" "),t.customerList.length?e("div",{staticClass:"bottomPage"},[e("span",{staticStyle:{"vertical-align":"middle"}},[e("a-checkbox",{staticClass:"botomCheck",attrs:{checked:t.checkAll},on:{change:t.checkedAll}}),t._v(" "),t.selectedRowKeys.length?e("a-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(n){return t.deleteUser()}}},[e("a-button",{staticStyle:{float:"left","margin-left":"56px"},attrs:{type:"primary"}},[t._v(" 批量删除 ")])],1):t._e(),t._v(" "),e("span",{staticStyle:{"vertical-align":"middle","margin-left":"20px"}},[t._v("已选: "+t._s(t.selectedRowKeys.length)+" 个 总: "+t._s(t.customerList.length)+" 个")])],1)]):t._e()],1)])])},staticRenderFns:[]},t.exports.render._withStripped=!0},2185:function(t,n,e){var a=e(1704);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(16)("342cbabd",a,!1)},2186:function(t,n,e){var a=e(1705);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(16)("3e43970f",a,!1)}});