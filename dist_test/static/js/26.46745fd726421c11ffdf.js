webpackJsonp([26],{1211:function(t,e,a){a(2175),a(2174);var n=a(20)(a(1615),a(2092),"data-v-19c7ae18",null);n.options.__file="D:\\baozWork\\liejing\\js\\ECMS\\src\\view\\customerManage\\newFriend.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] newFriend.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},1252:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxKSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDxlbGxpcHNlIGZpbGw9IiNGNUY1RjUiIGN4PSIzMiIgY3k9IjMzIiByeD0iMzIiIHJ5PSI3Ii8+CiAgICA8ZyBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0iI0Q5RDlEOSI+CiAgICAgIDxwYXRoIGQ9Ik01NSAxMi43Nkw0NC44NTQgMS4yNThDNDQuMzY3LjQ3NCA0My42NTYgMCA0Mi45MDcgMEgyMS4wOTNjLS43NDkgMC0xLjQ2LjQ3NC0xLjk0NyAxLjI1N0w5IDEyLjc2MVYyMmg0NnYtOS4yNHoiLz4KICAgICAgPHBhdGggZD0iTTQxLjYxMyAxNS45MzFjMC0xLjYwNS45OTQtMi45MyAyLjIyNy0yLjkzMUg1NXYxOC4xMzdDNTUgMzMuMjYgNTMuNjggMzUgNTIuMDUgMzVoLTQwLjFDMTAuMzIgMzUgOSAzMy4yNTkgOSAzMS4xMzdWMTNoMTEuMTZjMS4yMzMgMCAyLjIyNyAxLjMyMyAyLjIyNyAyLjkyOHYuMDIyYzAgMS42MDUgMS4wMDUgMi45MDEgMi4yMzcgMi45MDFoMTQuNzUyYzEuMjMyIDAgMi4yMzctMS4zMDggMi4yMzctMi45MTN2LS4wMDd6IiBmaWxsPSIjRkFGQUZBIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"},1253:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"dataStatus",props:["width","height","material"],components:{},data:function(){return{}}}},1254:function(t,e,a){e=t.exports=a(15)(!1),e.push([t.i,"\n.imgBg[data-v-6c09838e]{\n    opacity:1;\n    text-align:center;\n    position:relative;\n}\n.text[data-v-6c09838e]{\n    position:absolute;\n    left:50%;\n    bottom:44px;\n    color:#ccc;\n    transform: translateX(-50%);\n}\n.matText[data-v-6c09838e]{\n    position:absolute;\n    left:50%;\n    bottom:86px;\n    color:#00000073;\n    transform: translateX(-50%);\n}\n",""])},1255:function(t,e,a){a(1257);var n=a(20)(a(1253),a(1256),"data-v-6c09838e",null);n.options.__file="D:\\baozWork\\liejing\\js\\ECMS\\src\\components\\pageConfig\\dataStatus.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] dataStatus.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},1256:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"imgBg"},[n("svg",{staticStyle:{"text-align":"center"},attrs:{width:t.width,height:t.height}},[n("image",{attrs:{"xlink:href":a(1252),width:"100%"}})]),t._v(" "),t.material?t._e():n("span",{staticClass:"text"},[t._v("暂无数据")]),t._v(" "),t.material?n("span",{staticClass:"matText"},[t._v("暂不支持")]):t._e()])},staticRenderFns:[]},t.exports.render._withStripped=!0},1257:function(t,e,a){var n=a(1254);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(16)("4232382d",n,!1)},1615:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(137),i=a.n(n),s=a(54),o=a.n(s),r=a(1255),c=a.n(r),l=(a(94),a(93));e.default={name:"",components:{dataStatus:c.a},data:function(){return{selectTab:"1",newFriendList:[],locale:{filterConfirm:"",filterReset:"",emptyText:""},columns_friend:[{title:"编号",align:"center",dataIndex:"id"},{title:"头像",dataIndex:"avatar_url",align:"center",scopedSlots:{customRender:"avatar_url"}},{title:"昵称",align:"center",dataIndex:"nickname"},{title:"所属机器人",align:"center",dataIndex:"assistant_name"},{title:"招呼消息",align:"center",dataIndex:"hello_msg"},{title:"性别",align:"center",dataIndex:"sex",customRender:function(t,e,a){return 10==t?"男":10==t?"女":"未知"}},{title:"请求来源",align:"center",dataIndex:"friend_from"},{title:"请求时间",align:"center",dataIndex:"created"},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],page:1,page_size:10,total:0,visible:!1,paramsObj:{auto_pass_time:60}}},mounted:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},updated:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},methods:{tabChange:function(t){switch(this.selectTab=t,this.selectTab){case"1":this.getNewFriend();break;case"2":this.getActionHistory()}},onFriendChange:function(t,e){this.page=t,this.page_size=e,this.getNewFriend()},onFriendSizeChange:function(t,e){this.page=1,this.page_size=e,this.getNewFriend()},getNewFriend:function(){var t=this;this.$axios({method:"GET",url:"/index.php?r=uc/customer/new-friend",params:{p:this.page,n:this.page_size,department_id:this.$store.state.user.user.department.id}}).then(function(e){var a=e.data;1==a.status&&(t.newFriendList=a.data.list,t.total=parseInt(a.data.count))})},getActionHistory:function(){console.log("获取操作记录")},agree:function(t){var e=this;if(t.flag)return void this.$message.success("已发送添加指令，请等待或刷新页面");t.flag=!0;var a=this,n={cmd:2026,fromClientId:this.$store.state.user.user.user_id,toClientId:t.assistant_username,cmdData:{username:t.username,ticket:t.ticket},priority:0};l.isOfflineRobot(t.assistant_username,this.$store.state.user.offlineRobot)&&this.$store.commit("user/setRobotStatus","2"),this.$ws.sendMsgFun(n),this.$message.success("同意好友请求已发送"),this.$ws.cmd2026=function(t){2==t.status?a.getNewFriend():4==t.status&&e.$notification.warning({message:function(e){return e("div",{domProps:{innerHTML:t.callbackMsg}})},description:"暂无法执行操作，请检查手机连接状态",duration:2,style:{background:"#fbf8e9"}})}},ignore:function(t){var e=this;this.$axios({method:"POST",url:"/index.php?r=uc/customer/agree",data:{friend_id:t,type:20}}).then(function(t){1==t.data.status&&e.getNewFriend()})},com_handleOk:function(){var t=this,e=JSON.parse(o()(this.paramsObj));e.auto_pass=e.auto_pass?"10":"0",this.$axios({method:"POST",url:"/index.php?r=uc/organization/department-update",data:i()(e,{type:"1",route_id:"169"})}).then(function(e){1==e.data.status&&(t.$message.success("设置成功"),t.visible=!1)})},setting:function(){var t=this;this.$axios({method:"GET",url:"/index.php?r=uc/user/list"}).then(function(e){var a=e.data;1==a.status&&(t.visible=!0,t.paramsObj={id:a.data.user.department.id,auto_pass:"10"==a.data.user.department.auto_pass,auto_pass_time:a.data.user.department.auto_pass_time})})}},created:function(){this.getNewFriend()},beforeDestroy:function(){this.$ws.cmd2026=null}}},1693:function(t,e,a){e=t.exports=a(15)(!1),e.push([t.i,"\n.new_friend .ant-table-thead > tr > th,.new_friend .ant-table-tbody > tr > td {\n    padding: 10px;\n}\n",""])},1694:function(t,e,a){e=t.exports=a(15)(!1),e.push([t.i,"\n.new_friend[data-v-19c7ae18] {\n  height: calc(100vh - 90px);\n  overflow: auto;\n  background: #ffffff;\n  padding: 25px;\n}\n.tabs[data-v-19c7ae18] {\n  position: relative;\n}\n.tabs .setting[data-v-19c7ae18] {\n  color: #5AA9CD;\n  cursor: pointer;\n  position: absolute;\n  right: 0;\n  top: 37%;\n  transform: translateY(-50%);\n}\n.stausPage[data-v-19c7ae18] {\n  position: absolute;\n  left: 50%;\n  top: 200px;\n  z-index: 999;\n  transform: translate(-50%, 0);\n}\n.contact-info[data-v-19c7ae18] {\n  position: relative;\n}\n",""])},2092:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new_friend"},[a("div",{staticClass:"tabs"},[a("a-tabs",{attrs:{defaultActiveKey:t.selectTab,locale:t.locale},on:{change:t.tabChange}},[a("a-tab-pane",{key:"1",attrs:{tab:"新的客户"}})],1),t._v(" "),a("div",{staticClass:"setting",on:{click:function(e){return t.setting()}}},[a("a-icon",{attrs:{type:"setting",theme:"filled"}}),t._v(" "),a("span",{staticStyle:{"padding-left":"5px"}},[t._v("设置")])],1)],1),t._v(" "),a("div",[1==t.selectTab?a("div",{staticClass:"contact-info"},[a("a-table",{attrs:{columns:t.columns_friend,dataSource:t.newFriendList,pagination:!1,locale:t.locale},scopedSlots:t._u([{key:"avatar_url",fn:function(t,e,n){return[a("div",[a("a-avatar",{staticStyle:{"border-radius":"5px"},attrs:{src:t,size:48}})],1)]}},{key:"action",fn:function(e,n,i){return[a("div",[a("a",{staticStyle:{"padding-right":"20px"},attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.agree(n)}}},[t._v("同意")]),t._v(" "),a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.ignore(n.id)}}},[t._v("忽略")])])]}}],null,!1,686280525)}),t._v(" "),a("br"),t._v(" "),t.newFriendList.length?a("a-pagination",{staticStyle:{"text-align":"right"},attrs:{showQuickJumper:"",showSizeChanger:"",showTotal:function(t){return"总共"+t+"条"},pageSize:t.page_size,total:t.total,pageSizeOptions:["10","20","30","40","50"]},on:{change:t.onFriendChange,showSizeChange:t.onFriendSizeChange},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),t._v(" "),a("br")],1):t._e(),t._v(" "),2==t.selectTab?a("div",{staticClass:"contact-info"},[t._v("\n            这是操作记录页面\n        ")]):t._e()]),t._v(" "),a("a-modal",{attrs:{title:"设置",footer:null,visible:t.visible,width:"600px"},on:{cancel:function(e){t.visible=!1}}},[a("a-form",{on:{submit:t.com_handleOk}},[a("a-form-item",{attrs:{wrapperCol:{span:24},label:"自动通过："}},[a("a-switch",{attrs:{checkedChildren:"开",unCheckedChildren:"关"},model:{value:t.paramsObj.auto_pass,callback:function(e){t.$set(t.paramsObj,"auto_pass",e)},expression:"paramsObj.auto_pass"}})],1),t._v(" "),a("a-form-item",{attrs:{wrapperCol:{span:24},label:"时间间隔："}},[a("a-input-number",{attrs:{min:5},model:{value:t.paramsObj.auto_pass_time,callback:function(e){t.$set(t.paramsObj,"auto_pass_time",e)},expression:"paramsObj.auto_pass_time"}}),t._v(" 秒\n            ")],1),t._v(" "),a("a-form-item",[a("p",{staticStyle:{color:"orangered"}},[t._v("注意：1.手机端微信需关闭自动通过 2.登录PC端微信,手机端将无法收到好友请求通知")])]),t._v(" "),a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{wrapperCol:{span:24,offset:17}}},[a("a-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.com_handleOk}},[t._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},2174:function(t,e,a){var n=a(1693);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(16)("42e11ad2",n,!1)},2175:function(t,e,a){var n=a(1694);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(16)("78abf180",n,!1)}});