webpackJsonp([57],{1196:function(t,e,n){n(2196);var a=n(20)(n(1585),n(2107),"data-v-4812f3c0",null);a.options.__file="D:\\baozWork\\liejing\\js\\ECMS\\src\\components\\MessagePush\\newMsg.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] newMsg.vue: functional components are not supported with templates, they should use render functions."),t.exports=a.exports},1585:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(225),s=n(93);e.default={name:"newMsg",data:function(){return{newMessageList:[],com_visible:!1,form:this.$form.createForm(this),queryForm:{id:"",com_textarea:""},comment_con:{nick_name:"",content_text:""}}},methods:{back:function(){this.$router.push({path:"/customerChat/friendCircleSelf"})},com_showModal:function(t){20!=t.type&&(this.form.setFieldsValue({com_textarea:""}),this.com_visible=!0,this.comment_con=t)},com_detail:function(t){this.$router.push({path:"/pushMange/friendCircleDetail",query:{id:t,assistant_id:this.$route.query.assistant_id}})},com_handleOk:function(t){var e=this;t.preventDefault(),this.form.validateFields(function(t,n){if(!t){s.isOfflineRobot(e.comment_con.robot_username,e.$store.state.user.offlineRobot)&&e.$store.commit("user/setRobotStatus","2");var a={cmd:2050,fromClientId:e.$store.state.user.user.user_id,toClientId:e.comment_con.robot_username,cmdData:{snsId:e.comment_con.sns_id,type:2,comment:n.com_textarea,toComment:{timestamp:e.comment_con.timestamp,username:e.comment_con.username,nickname:e.comment_con.nickname,id:e.comment_con.wx_comment_id}},priority:0};e.$ws.sendMsgFun(a),e.$ws.cmd2050=function(t){2==t.status?(e.$message.success("评论成功",2),e.com_visible=!1):4==t.status?e.$notification.warning({message:function(e){return e("div",{domProps:{innerHTML:t.callbackMsg}})},description:"暂无法执行操作，请检查手机连接状态",duration:2,style:{background:"#fbf8e9"}}):e.com_visible=!1}}})},com_handleCancel:function(){this.com_visible=!1},refreshGroup:function(t,e){var n=this;this.$axios({method:"POST",url:"/index.php?r=uc/sale/new-msg",data:{num:t,department_id:this.$store.state.user.user.department.id,assistant_id:e}}).then(function(t){var e=t.data;1==e.status&&(n.newMessageList=e.data,n.newMessageList.forEach(function(t){!!t.content_text&&(t.content_text=a.stringToHtml(t.content_text)),!!t.comment&&(t.comment=a.stringToHtml(t.comment))}))})}},beforeCreate:function(){},mounted:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},updated:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},created:function(){console.log(this.$route.query.assistant_id),this.refreshGroup(this.$route.query.num,this.$route.query.assistant_id)},beforeDestroy:function(){this.$ws.cmd2050=null}}},1715:function(t,e,n){e=t.exports=n(15)(!1),e.push([t.i,'/*清除浮动代码*/\n.hide[data-v-4812f3c0] {\n  display: none;\n}\n.clearFloat[data-v-4812f3c0]:after {\n  display: block;\n  clear: both;\n  content: "";\n  visibility: hidden;\n  height: 0;\n}\n.clearFloat[data-v-4812f3c0] {\n  zoom: 1;\n}\n.fr[data-v-4812f3c0] {\n  float: right;\n}\n.fl[data-v-4812f3c0] {\n  float: left;\n}\n.newMsg .circle_title[data-v-4812f3c0] {\n  /*margin-top: 30px;*/\n  background: #F7F7F7;\n  padding: 0 50px;\n  /*text-align: center;*/\n}\n.newMsg .circle_title div[data-v-4812f3c0] {\n  padding: 10px 0;\n}\n.background-color[data-v-4812f3c0] {\n  background: #fff;\n}\n.newMsg .row[data-v-4812f3c0] {\n  border-bottom: 1px solid #e5e5e5;\n  padding: 10px 0;\n  /*text-align: center;*/\n}\n.newMsg[data-v-4812f3c0] {\n  height: calc(100vh - 150px);\n}\n.newMsg .new_box[data-v-4812f3c0] {\n  /*min-height: 600px;*/\n}\n.newMsg .new_box .new_con[data-v-4812f3c0] {\n  padding: 0 50px;\n}\n.newMsg .new_box .new_con .new_img .avatar_url[data-v-4812f3c0] {\n  border-radius: 5px;\n  vertical-align: middle;\n}\n.newMsg .new_box .new_con .new_img .nick_name[data-v-4812f3c0] {\n  display: inline-block;\n  padding-left: 5px;\n}\n.newMsg .new_box .new_con .new_text[data-v-4812f3c0] {\n  padding: 2px 0;\n}\n.newMsg .new_box .btn_group[data-v-4812f3c0] {\n  text-align: center;\n}\n',""])},2107:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"background-color newMsg",staticStyle:{position:"relative",margin:"50px 20px 50px 20px",overflow:"auto"}},[n("a-button",{staticStyle:{position:"fixed",top:"86px","z-index":"1"},attrs:{type:"default",icon:"left"},on:{click:t.back}},[t._v("返回")]),t._v(" "),n("a-row",{staticClass:"circle_title",attrs:{type:"flex"}},[n("a-col",{attrs:{span:"4"}},[n("div",[t._v("用户")])]),t._v(" "),n("a-col",{attrs:{span:"9"}},[n("div",[t._v("评论")])]),t._v(" "),n("a-col",{attrs:{span:"9"}},[n("div",[t._v("朋友圈")])]),t._v(" "),n("a-col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[n("div",[t._v("操作")])])],1),t._v(" "),n("div",{staticClass:"new_box"},t._l(t.newMessageList,function(e,a){return n("div",{staticClass:"new_con"},[n("a-row",{staticClass:"row",attrs:{type:"flex",align:"middle"}},[n("a-col",{attrs:{span:"4"}},[n("div",{staticClass:"new_img"},[n("img",{staticClass:"avatar_url",attrs:{src:e.avatar_url,height:"50",width:"50"}}),t._v(" "),n("div",{staticClass:"nick_name"},[t._v(t._s(e.nickname))])])]),t._v(" "),n("a-col",{attrs:{span:"9"}},[n("div",{staticClass:"new_text",domProps:{innerHTML:t._s(e.comment)}})]),t._v(" "),n("a-col",{attrs:{span:"9"}},[n("div",{staticClass:"new_text",domProps:{innerHTML:t._s(e.content_text)}})]),t._v(" "),n("a-col",{staticClass:"btn_group",attrs:{span:"2"}},[10==e.type?n("a",{staticStyle:{"padding-right":"15px"},attrs:{href:"javascript:void(0);"},on:{click:function(n){return t.com_showModal(e)}}},[t._v("回复")]):t._e(),t._v(" "),n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(n){return t.com_detail(e.id)}}},[t._v("详情")])])],1)],1)}),0),t._v(" "),n("a-modal",{attrs:{title:"回复朋友圈",footer:null,visible:t.com_visible},on:{cancel:t.com_handleCancel}},[n("p",{staticClass:"comment_con"},[n("a",{attrs:{href:"javascript:void(0);"}},[t._v(t._s(t.comment_con.nickname)+"：")]),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.comment_con.comment)}})]),t._v(" "),n("a-form",{attrs:{form:t.form},on:{submit:t.com_handleOk}},[n("a-form-item",{attrs:{wrapperCol:{span:24}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["com_textarea",{rules:[{required:!0,message:"不能为空"}]}],expression:"[ 'com_textarea', {rules: [{ required: true, message: '不能为空' }]}]"}],attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"回复"+t.comment_con.nickname+"："}})],1),t._v(" "),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{wrapperCol:{span:24,offset:17}}},[n("a-button",{on:{click:t.com_handleCancel}},[t._v("取消")]),t._v(" "),n("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",htmlType:"submit"}},[t._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},2196:function(t,e,n){var a=n(1715);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(16)("33f0f0c6",a,!1)}});