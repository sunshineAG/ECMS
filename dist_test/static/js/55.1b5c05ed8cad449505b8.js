webpackJsonp([55],{1205:function(t,e,n){n(2220);var o=n(20)(n(1609),n(2123),"data-v-6497ac70",null);o.options.__file="D:\\baozWork\\liejing\\js\\ECMS\\src\\view\\customerChat\\newMsg.vue",o.esModule&&Object.keys(o.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] newMsg.vue: functional components are not supported with templates, they should use render functions."),t.exports=o.exports},1609:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(225),s=n(93);e.default={name:"newMsg",data:function(){return{columns:[{title:"用户",dataIndex:"nickname",key:"nickname",scopedSlots:{customRender:"nickname"}},{title:"评论",dataIndex:"comment",scopedSlots:{customRender:"comment"}},{title:"朋友圈",dataIndex:"content_text",scopedSlots:{customRender:"content_text"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],newMessageList:[],com_visible:!1,form:this.$form.createForm(this),queryForm:{id:"",com_textarea:""},comment_con:{}}},methods:{back:function(){this.$router.push({path:"/customerChat/FriendsCircle"})},com_showModal:function(t){this.form.setFieldsValue({com_textarea:""}),this.com_visible=!0,this.comment_con=t},com_detail:function(t){this.$router.push({path:"/customerChat/friendCircleDetail",query:{id:t,assistant_id:this.$route.query.assistant_id}})},com_handleOk:function(t){var e=this;t.preventDefault(),this.form.validateFields(function(t,n){if(!t){var o={cmd:2050,fromClientId:e.$store.state.user.user.user_id,toClientId:e.comment_con.robot_username,cmdData:{snsId:e.comment_con.snsId,type:2,comment:n.com_textarea,toComment:{timestamp:e.comment_con.timestamp,username:e.comment_con.username,nickname:e.comment_con.nickname,id:e.comment_con.wx_comment_id}},priority:0};s.isOfflineRobot(e.comment_con.robot_username,e.$store.state.user.offlineRobot)&&e.$store.commit("user/setRobotStatus","2"),e.$ws.sendMsgFun(o),e.$ws.cmd2050=function(t){2==t.status?e.$message.success("评论成功",2):4==t.status&&e.$notification.warning({message:function(e){return e("div",{domProps:{innerHTML:t.callbackMsg}})},description:"暂无法执行操作，请检查手机连接状态",duration:2,style:{background:"#fbf8e9"}})},e.com_visible=!1}})},com_handleCancel:function(){this.com_visible=!1},getNewMsg:function(t,e){var n=this;this.$axios({method:"POST",url:"/index.php?r=uc/communication/friend-new-msg",data:{num:t,department_id:this.$store.state.user.user.department.id,assistant_id:e}}).then(function(t){var e=t.data;1==e.status&&(n.newMessageList=e.data.newMessageList,n.newMessageList.forEach(function(t){!!t.content_text&&(t.content_text=o.stringToHtml(t.content_text)),!!t.comment&&(t.comment=o.stringToHtml(t.comment))}))})}},beforeCreate:function(){},mounted:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},updated:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},created:function(){this.getNewMsg(this.$route.query.num,this.$route.query.assistant_id)},beforeDestroy:function(){this.$ws.cmd2050=null}}},1739:function(t,e,n){e=t.exports=n(15)(!1),e.push([t.i,'/*清除浮动代码*/\n.hide[data-v-6497ac70] {\n  display: none;\n}\n.clearFloat[data-v-6497ac70]:after {\n  display: block;\n  clear: both;\n  content: "";\n  visibility: hidden;\n  height: 0;\n}\n.clearFloat[data-v-6497ac70] {\n  zoom: 1;\n}\n.fr[data-v-6497ac70] {\n  float: right;\n}\n.fl[data-v-6497ac70] {\n  float: left;\n}\n.newMsg[data-v-6497ac70] {\n  position: relative;\n  margin: 50px 20px 50px 20px;\n  height: calc(100vh - 150px);\n  background: #ffffff;\n}\n',""])},2123:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"newMsg"},[n("a-button",{staticStyle:{position:"absolute",top:"-50px"},attrs:{type:"default",icon:"left"},on:{click:t.back}},[t._v("返回")]),t._v(" "),n("div",{staticStyle:{padding:"25px","overflow-y":"auto",height:"100%"}},[n("a-table",{attrs:{columns:t.columns,dataSource:t.newMessageList},scopedSlots:t._u([{key:"nickname",fn:function(e,o,s){return[n("div",{staticStyle:{"min-width":"200px","max-width":"300px"}},[n("a-avatar",{staticStyle:{"border-radius":"10px"},attrs:{src:o.avatar_url,size:54}}),t._v(" "),n("span",[t._v(t._s(e))])],1)]}},{key:"comment",fn:function(e,o,s){return[2==o.type?n("div",{staticClass:"new_text",domProps:{innerHTML:t._s(e)}}):n("div",[t._v("点赞")])]}},{key:"content_text",fn:function(e,o,s){return[n("div",[""!=e?n("span",{domProps:{innerHTML:t._s(e)}}):n("div",t._l(o.album,function(t){return n("img",{staticStyle:{"max-width":"200px","max-height":"200px"},attrs:{src:t.src}})}),0)])]}},{key:"action",fn:function(e,o,s){return[n("div",{staticStyle:{width:"100px"}},[2==o.type?n("a",{staticStyle:{"padding-right":"15px"},attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.com_showModal(o)}}},[t._v("回复")]):t._e(),t._v(" "),n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.com_detail(o.ass_id)}}},[t._v("详情")])])]}}])})],1),t._v(" "),n("a-modal",{attrs:{title:"回复评论",footer:null,visible:t.com_visible},on:{cancel:t.com_handleCancel}},[n("p",{staticClass:"comment_con"},[n("a",{attrs:{href:"javascript:void(0);"}},[t._v(t._s(t.comment_con.nickname)+"：")]),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.comment_con.comment)}})]),t._v(" "),n("a-form",{attrs:{form:t.form},on:{submit:t.com_handleOk}},[n("a-form-item",{attrs:{wrapperCol:{span:24}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["com_textarea",{rules:[{required:!0,message:"不能为空"}]}],expression:"[ 'com_textarea', {rules: [{ required: true, message: '不能为空' }]}]"}],attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"回复"+t.comment_con.nickname+"："}})],1),t._v(" "),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{wrapperCol:{span:24,offset:17}}},[n("a-button",{on:{click:t.com_handleCancel}},[t._v("取消")]),t._v(" "),n("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",htmlType:"submit"}},[t._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},2220:function(t,e,n){var o=n(1739);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(16)("162a7265",o,!1)}});