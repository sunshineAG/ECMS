webpackJsonp([34],{1224:function(e,t,a){a(2199);var n=a(20)(a(1631),a(2109),"data-v-4ef421fd",null);n.options.__file="D:\\baozWork\\liejing\\js\\ECMS\\src\\view\\groupManage\\userManage.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] userManage.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},1252:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxKSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDxlbGxpcHNlIGZpbGw9IiNGNUY1RjUiIGN4PSIzMiIgY3k9IjMzIiByeD0iMzIiIHJ5PSI3Ii8+CiAgICA8ZyBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0iI0Q5RDlEOSI+CiAgICAgIDxwYXRoIGQ9Ik01NSAxMi43Nkw0NC44NTQgMS4yNThDNDQuMzY3LjQ3NCA0My42NTYgMCA0Mi45MDcgMEgyMS4wOTNjLS43NDkgMC0xLjQ2LjQ3NC0xLjk0NyAxLjI1N0w5IDEyLjc2MVYyMmg0NnYtOS4yNHoiLz4KICAgICAgPHBhdGggZD0iTTQxLjYxMyAxNS45MzFjMC0xLjYwNS45OTQtMi45MyAyLjIyNy0yLjkzMUg1NXYxOC4xMzdDNTUgMzMuMjYgNTMuNjggMzUgNTIuMDUgMzVoLTQwLjFDMTAuMzIgMzUgOSAzMy4yNTkgOSAzMS4xMzdWMTNoMTEuMTZjMS4yMzMgMCAyLjIyNyAxLjMyMyAyLjIyNyAyLjkyOHYuMDIyYzAgMS42MDUgMS4wMDUgMi45MDEgMi4yMzcgMi45MDFoMTQuNzUyYzEuMjMyIDAgMi4yMzctMS4zMDggMi4yMzctMi45MTN2LS4wMDd6IiBmaWxsPSIjRkFGQUZBIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"},1253:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"dataStatus",props:["width","height","material"],components:{},data:function(){return{}}}},1254:function(e,t,a){t=e.exports=a(15)(!1),t.push([e.i,"\n.imgBg[data-v-6c09838e]{\n    opacity:1;\n    text-align:center;\n    position:relative;\n}\n.text[data-v-6c09838e]{\n    position:absolute;\n    left:50%;\n    bottom:44px;\n    color:#ccc;\n    transform: translateX(-50%);\n}\n.matText[data-v-6c09838e]{\n    position:absolute;\n    left:50%;\n    bottom:86px;\n    color:#00000073;\n    transform: translateX(-50%);\n}\n",""])},1255:function(e,t,a){a(1257);var n=a(20)(a(1253),a(1256),"data-v-6c09838e",null);n.options.__file="D:\\baozWork\\liejing\\js\\ECMS\\src\\components\\pageConfig\\dataStatus.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] dataStatus.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},1256:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"imgBg"},[n("svg",{staticStyle:{"text-align":"center"},attrs:{width:e.width,height:e.height}},[n("image",{attrs:{"xlink:href":a(1252),width:"100%"}})]),e._v(" "),e.material?e._e():n("span",{staticClass:"text"},[e._v("暂无数据")]),e._v(" "),e.material?n("span",{staticClass:"matText"},[e._v("暂不支持")]):e._e()])},staticRenderFns:[]},e.exports.render._withStripped=!0},1257:function(e,t,a){var n=a(1254);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(16)("4232382d",n,!1)},1631:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1255),i=a.n(n),s=(a(94),a(32));t.default={name:"",components:{dataStatus:i.a},data:function(){return{savFlg:!0,searchKey:"",selectId:"",page:1,page_size:10,total:0,userList:[],locale:{filterConfirm:"",filterReset:"",emptyText:""},columns:[{title:"编号",align:"center",dataIndex:"id"},{title:"头像",dataIndex:"avatar",align:"center",scopedSlots:{customRender:"avatar"}},{title:"用户名",align:"center",dataIndex:"user_name"},{title:"所属部门",align:"center",dataIndex:"department"},{title:"所属角色",align:"center",dataIndex:"role_name"},{title:"登录账号",align:"center",dataIndex:"tel"},{title:"最后登录",align:"center",dataIndex:"last_login"},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],departmentTree:[],expandedKeys:[]}},mounted:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},updated:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},methods:{searchList:function(){this.page=1,this.page_size=10,this.getUserList(this.selectId)},emitEmpty:function(){this.page=1,this.page_size=10,this.searchKey="",this.getUserList(this.selectId)},getUserList:function(e){var t=this;this.$axios({method:"POST",url:"/index.php?r=uc/organization/user",data:{department_id:e,searchKey:this.searchKey,p:this.page,n:this.page_size}}).then(function(a){var n=a.data;1==n.status&&(t.userList=n.data.userList,t.total=parseInt(n.data.userCount),0==n.data.userList.length&&t.page>1&&(t.page-=1,t.getUserList(e)))})},getDepartment:function(e){var t=this;this.$axios({method:"POST",url:"/index.php?r=uc/organization/permission-dist-department",data:{department_id:this.$store.state.user.user.department.id}}).then(function(a){var n=a.data;1==n.status&&(console.log(n.data.departmentList),t.departmentTree=t.listToTree(n.data.departmentList),e&&(t.selectId=t.departmentTree[0].key,t.getUserList(t.departmentTree[0].key)))})},onChange:function(e,t){this.page=e,this.page_size=t,this.getUserList(this.selectId)},onShowSizeChange:function(e,t){this.page=1,this.page_size=t,this.getUserList(this.selectId)},onSelect:function(e,t){console.log(e),this.selectId=e[0],this.getUserList(e[0])},listToTree:function(e){var t=this,a=[];return e.forEach(function(e){e.children&&e.children.length>0&&(e.children=t.listToTree(e.children),t.expandedKeys.push(e.id)),a.push({title:e.name,key:e.id,children:e.children})}),a},addUser:function(){s.store.remove("editUser"),this.$router.push({path:"/groupManage/addUser",query:{departmentId:this.selectId}})},edit:function(e){console.log(e),s.store.set("editUser",e),this.$router.push({path:"/groupManage/editUser",query:{id:e.id}})},del:function(e){var t=this;this.$confirm({title:"确定删除当前用户？",onOk:function(){t.$axios({method:"POST",url:"/index.php?r=uc/organization/user-del",data:{id_arr:[e]}}).then(function(e){1==e.data.status&&(t.$message.success("删除成功"),t.getUserList(t.selectId),t.$axios({method:"GET",url:"/index.php?r=uc/user/list"}).then(function(e){var a=e.data;1==a.status&&(t.$store.commit("user/setUser",a.data.user),t.$store.commit("user/setDepartment",a.data.department),t.$store.commit("user/setManager",a.data.manager))}))})}})},imgExists:function(e){console.log("imgLoadError");var t=this.$store.state.user.user.default_url,a=new Image;a.onload=function(){(a.filesize>0||a.width>0&&a.height>0)&&(e.target.src=t,a=null)},a.src=t}},created:function(){this.getDepartment(!0)}}},1718:function(e,t,a){t=e.exports=a(15)(!1),t.push([e.i,"\n.user-manage[data-v-4ef421fd] {\n  background: #ffffff;\n}\n.user-manage .left-header[data-v-4ef421fd] {\n  padding: 0 20px;\n  height: 60px;\n  line-height: 60px;\n  border-bottom: 2px solid #f0f2f5;\n}\n.user-manage .right-header[data-v-4ef421fd] {\n  padding: 0 20px;\n  height: 60px;\n  line-height: 60px;\n  border-left: 2px solid #f0f2f5;\n  text-align: left;\n  font-size: 14px;\n}\n.user-manage .right-header .add-user[data-v-4ef421fd] {\n  margin-top: 14px;\n  float: right;\n}\n.user-manage .left-content[data-v-4ef421fd] {\n  padding: 20px;\n  overflow-y: auto;\n  height: calc(100vh - 175px);\n}\n.user-manage .right-content[data-v-4ef421fd] {\n  border-left: 2px solid #f0f2f5;\n  padding: 20px;\n  overflow-y: auto;\n  height: calc(100vh - 175px);\n  position: relative;\n}\n.stausPage[data-v-4ef421fd] {\n  position: absolute;\n  left: 50%;\n  top: 200px;\n  z-index: 999;\n  transform: translate(-50%, 0);\n}\n",""])},2109:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-manage"},[a("a-row",[a("a-col",{attrs:{xl:4,sm:6}},[a("div",{staticClass:"left-header"},[e._v("\n                部门结构\n            ")]),e._v(" "),a("div",{staticClass:"left-content"},[a("a-tree",{attrs:{treeData:e.departmentTree,defaultExpandAll:!0,defaultExpandedKeys:e.expandedKeys},on:{select:e.onSelect}})],1)]),e._v(" "),a("a-col",{attrs:{xl:20,sm:18}},[a("div",{staticClass:"right-header"},[a("a-input-search",{staticStyle:{width:"300px","margin-top":"14px"},attrs:{placeholder:"请输入编号、真实姓名、用户名搜索",enterButton:""},on:{search:e.searchList},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),e._v(" "),a("a-button",{staticClass:"add-user",attrs:{type:"primary"},on:{click:e.addUser}},[e._v("新建")])],1),e._v(" "),a("div",{staticClass:"right-content"},[a("a-table",{attrs:{columns:e.columns,dataSource:e.userList,pagination:!1,locale:e.locale},scopedSlots:e._u([{key:"avatar",fn:function(t,n,i){return[a("div",[a("img",{staticStyle:{width:"48px",height:"48px","border-radius":"5px"},attrs:{src:t},on:{error:function(t){return e.imgExists(t)}}})])]}},{key:"action",fn:function(t,n,i){return[a("div",[a("a",{staticStyle:{"padding-right":"15px"},attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.edit(n)}}},[e._v("编辑")]),e._v(" "),a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.del(n.id)}}},[e._v("删除")])])]}}])}),e._v(" "),a("br"),e._v(" "),e.userList.length?a("a-pagination",{staticStyle:{"text-align":"right"},attrs:{showQuickJumper:"",showSizeChanger:"",showTotal:function(e){return"总共"+e+"条"},pageSize:e.page_size,total:e.total,pageSizeOptions:["10","20","30","40","50"]},on:{change:e.onChange,showSizeChange:e.onShowSizeChange},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}):e._e(),e._v(" "),a("br")],1)])],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},2199:function(e,t,a){var n=a(1718);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(16)("5f34bd9e",n,!1)}});