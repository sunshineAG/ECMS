webpackJsonp([52],{1231:function(t,e,a){a(2169);var s=a(20)(a(1638),a(2089),"data-v-13a56916",null);s.options.__file="D:\\baozWork\\liejing\\js\\ECMS\\src\\view\\pushMange\\editLiveCode.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] editLiveCode.vue: functional components are not supported with templates, they should use render functions."),t.exports=s.exports},1638:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a(32);e.default={name:"editLiveCode",data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12}},title:"",id:this.$route.query.id,user_id:this.$route.query.user_id,department_id:this.$route.query.department_id,saveFlag:!0,paramsObj:{live_code_desc:"",auto_pass_time:1,live_code_pv:250,assistant_id:[]},robotListAll:[]}},methods:{com_handleCancel:function(){this.$router.push({path:"/pushMange/liveCode"})},changeRobot:function(t){this.paramsObj.assistant_id=t},com_handleOk:function(){var t=this;if(!this.paramsObj.live_code_desc||0==this.paramsObj.assistant_id.length)return this.saveFlag=!1,!1;var e="";"0"!=this.id?(e="/livecode/livecodeManager/updatelivecodejson?",this.paramsObj.live_code_id=this.id):(e="/livecode/livecodeManager/createlivecodejson?",this.paramsObj.company_short_name=this.$store.state.user.company.ecms_short_name,this.paramsObj.company_user_id=this.$store.state.user.user.user_id),this.paramsObj.assistant_id=this.paramsObj.assistant_id.join("_"),this.paramsObj.user_id=this.user_id,this.paramsObj.department_id=this.department_id,this.$axios({method:"get",url:e,params:this.paramsObj}).then(function(e){1==e.data.status&&(t.$message.success("保存成功"),t.saveFlag=!0,t.$router.push({path:"/pushMange/liveCode"}))})},getRobot:function(t){var e=this;this.$axios({method:"POST",url:"/index.php?r=uc/organization/assistant-list",data:{department_id:this.department_id}}).then(function(a){var s=a.data;1==s.status&&(e.robotListAll=s.data,t&&e.getLiveCode())})},getLiveCode:function(){var t=this;this.$axios({method:"POST",url:"/livecode/livecodeManager/livecodejson?",data:{live_code_id:this.id,company_short_name:this.$store.state.user.company.ecms_short_name}}).then(function(e){var a=e.data;1==a.status&&(t.paramsObj={live_code_desc:a.data[0].live_code_desc,auto_pass_time:parseInt(a.data[0].auto_pass_time),live_code_pv:parseInt(a.data[0].live_code_pv),assistant_id:[]},a.data.forEach(function(e){var a=!1;t.robotListAll.forEach(function(t){e.assistant_id==t.id&&(a=!0)}),a&&t.paramsObj.assistant_id.push(e.assistant_id.toString())}))})}},mounted:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},updated:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},created:function(){"0"!=this.id?(this.getRobot(!0),this.title="修改个人号活码"):(this.getRobot(!1),this.title="创建个人号活码")}}},1688:function(t,e,a){e=t.exports=a(15)(!1),e.push([t.i,"\n.background-color[data-v-13a56916] {\n  background: #fff;\n  height: calc(100vh - 110px);\n  overflow-y: auto;\n}\n.mag_push_title[data-v-13a56916] {\n  border-bottom: 1px solid #bbbbbb;\n  margin: 0 0 20px 0;\n  padding: 17px 38px;\n  font-size: 16px;\n  background: #fff;\n}\n.upload[data-v-13a56916] {\n  position: relative;\n  height: 112px;\n  width: 112px;\n  margin-left: 25%;\n  float: none !important;\n}\n.upload .up_loading[data-v-13a56916] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -7px;\n  margin-left: -7px;\n}\n.upload svg[data-v-13a56916] {\n  font-size: 22px;\n}\n.loading[data-v-13a56916] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -7px;\n  margin-left: -7px;\n}\n",""])},2089:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"background-color"},[a("div",{staticClass:"mag_push_title"},[t._v(t._s(t.title))]),t._v(" "),a("a-row",[a("a-col",{attrs:{justify:"center",span:"18",push:"3"}},[a("a-form",[a("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"个人活码名称：",validateStatus:t.saveFlag?"success":t.paramsObj.live_code_desc?"success":"error",help:t.saveFlag?"":t.paramsObj.live_code_desc?"":"请输入个人活码名称"}},[a("a-input",{attrs:{placeholder:"请输入个人活码名称"},model:{value:t.paramsObj.live_code_desc,callback:function(e){t.$set(t.paramsObj,"live_code_desc",e)},expression:"paramsObj.live_code_desc"}})],1),t._v(" "),a("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"二维码展示次数："}},[a("a-slider",{staticStyle:{width:"95%",display:"inline-block"},attrs:{min:200,max:500,tooltipVisible:!0},model:{value:t.paramsObj.live_code_pv,callback:function(e){t.$set(t.paramsObj,"live_code_pv",e)},expression:"paramsObj.live_code_pv"}}),t._v(" "),a("a-tooltip",{staticStyle:{position:"absolute",right:"-20px",top:"0",transform:"translateY(-50%)"},attrs:{placement:"right"}},[a("template",{slot:"title"},[a("span",[t._v("用于设置每个机器人每天的活码访问展示次数，用于机器人分担流量")])]),t._v(" "),a("a-icon",{staticStyle:{cursor:"pointer","font-size":"20px"},attrs:{type:"question-circle",theme:"filled"}})],2)],1),t._v(" "),a("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"绑定机器人："}},[a("a-select",{attrs:{allowClear:!0,placeholder:"请选择。。。",mode:"multiple"},on:{change:t.changeRobot},model:{value:t.paramsObj.assistant_id,callback:function(e){t.$set(t.paramsObj,"assistant_id",e)},expression:"paramsObj.assistant_id"}},t._l(t.robotListAll,function(e,s){return a("a-select-option",{key:e.id},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.nickname)+"\n\t\t\t\t\t\t")])}),1)],1),t._v(" "),a("a-form-item",{staticStyle:{"text-align":"right"},attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:" ",colon:!1}},[a("a-button",{staticStyle:{"margin-right":"10px"},on:{click:t.com_handleCancel}},[t._v("取消")]),t._v(" "),a("a-button",{attrs:{type:"primary"},on:{click:t.com_handleOk}},[t._v("提交")])],1)],1)],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},2169:function(t,e,a){var s=a(1688);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(16)("bfca1008",s,!1)}});