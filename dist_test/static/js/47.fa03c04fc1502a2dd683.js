webpackJsonp([47],{1227:function(t,a,e){e(2210),e(2211);var s=e(20)(e(1634),e(2118),"data-v-57e8d1d5",null);s.options.__file="D:\\baozWork\\liejing\\js\\ECMS\\src\\view\\productManage\\new_add.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] new_add.vue: functional components are not supported with templates, they should use render functions."),t.exports=s.exports},1634:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e(537),i=e.n(s),n=e(137),r=e.n(n),l=e(32);a.default={name:"new_add",data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:12}},hflg:!1,createState:"",previewVisible:!1,loading:!1,mediapath:"",paramsObj:{},selectList:[],fileList:[],headers:{Authorization:l.store.get("token")},saveFlag:!0}},methods:{back:function(){this.$router.push({path:"/productManage/productInfo"})},cancel:function(){this.previewVisible=!1},selChange:function(t){this.paramsObj.class_id=t},handleChange:function(t){var a=this;if("uploading"===t.file.status)return void(this.loading=!0);"done"===t.file.status?1==t.file.response.status?(a.fileList.push(t.file.response.data.path),this.loading=!1):(a.$notification.warning({message:"上传错误",description:t.file.response.msg}),this.loading=!1):"error"===t.file.status&&(a.$notification.warning({message:"上传失败",description:"文件"+t.file.name+"上传失败"}),this.loading=!1)},beforeUpload:function(t){console.log("image/jpeg"===t.type);var a="image/jpeg"===t.type||("image/png"===t.type||"image/jpg"===t.type);a||this.$notification.warning({message:"文件格式不正确",description:"文件格式不正确，请选择JPG或PNG。"});var e=t.size/1024/1024<1;return e||(this.$notification.warning({message:"超出文件大小限制",description:"图像不能大于1MB！"}),this.$message.error("图像不能大于1MB！")),a&&e},handlePreview:function(t){this.mediapath=t,this.previewVisible=!0},deleteFn:function(t){this.fileList.splice(t,1)},save:function(){var t=this;if(!(this.paramsObj.price&&this.fileList.length&&this.paramsObj.class_id&&this.paramsObj.title&&this.paramsObj.item_number))return this.saveFlag=!1,!1;var a=[],e=!0,s=!1,n=void 0;try{for(var l,o=i()(this.fileList);!(e=(l=o.next()).done);e=!0){var p=l.value;a.push(p)}}catch(t){s=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(s)throw n}}this.paramsObj.src=a,this.$axios({method:"POST",url:"/index.php?r=uc/product/goods-add",data:r()({data:[this.paramsObj]})}).then(function(a){1==a.data.status&&(t.$message.success("保存成功"),t.saveFlag=!0,t.$router.push({path:"/productManage/productInfo"}))})},refreshGroup:function(){var t=this;this.$axios({method:"GET",url:"/index.php?r=uc/product/goods-info",params:{id:this.$route.query.id}}).then(function(a){var e=a.data;1==e.status&&(t.paramsObj=e.data,t.fileList=e.data.src,t.saveFlag=!1)})},getSelect:function(){var t=this;this.$axios({method:"GET",url:"/index.php?r=uc/product/get-class",params:{}}).then(function(a){var e=a.data;1==e.status&&(t.selectList=e.data)})}},created:function(){this.paramsObj={},this.paramsObj.id=this.$route.query.id,this.createState=this.$route.query.create,this.getSelect(),"2"==this.createState&&this.refreshGroup()}}},1729:function(t,a,e){a=t.exports=e(15)(!1),a.push([t.i,"\n.container_box {\r\n    /* height: calc(100vh - 90px);\r\n\t\toverflow-y: auto;\r\n\t\tmax-height: 500px; */\n}\n.flr {\r\n    text-align: right;\n}\n.til {\r\n    font-size: 18px;\r\n    font-weight: bold;\n}\n.ant-upload-list {\r\n    position: relative;\r\n    height: 112px;\r\n    width: 58%;\r\n    margin-left: 21%;\n}\n.ant-upload-select-picture-card i {\r\n    font-size: 32px;\r\n    color: #999;\n}\n.ant-upload.ant-upload-drag p.ant-upload-text {\r\n    margin-top: 8px;\r\n    padding: 0 10px;\r\n    color: #666;\n}\n.ant-upload-list-item-actions svg {\r\n    font-size: 20px;\n}\n.ant-upload-drag-icon svg {\r\n    font-size: 60px;\n}\r\n",""])},1730:function(t,a,e){a=t.exports=e(15)(!1),a.push([t.i,"\n.loading[data-v-57e8d1d5] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -7px;\n  margin-left: -7px;\n}\n.loading svg[data-v-57e8d1d5] {\n  font-size: 24px;\n}\n.mag_push_title[data-v-57e8d1d5] {\n  background: #fff;\n  margin: 0 0 10px 0;\n  padding: 12px 38px;\n  font-size: 16px;\n}\n.send-action[data-v-57e8d1d5] {\n  text-align: right;\n  padding: 10px 50px 20px;\n}\n.send-action .btn[data-v-57e8d1d5] {\n  padding: 0 25px;\n}\n.send-action .btn[data-v-57e8d1d5]:nth-child(1) {\n  margin-right: 30px;\n}\n.send-action .btn_send[data-v-57e8d1d5] {\n  background: #5AA9CD;\n  border-color: #5AA9CD;\n}\n",""])},2118:function(t,a,e){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"el",staticClass:"container_box"},[e("a-row",{staticClass:"mag_push_title"},[e("a-col",{staticClass:"til",attrs:{span:"12"}},[t._v(t._s(1==t.createState?"添加产品":"编辑产品"))]),t._v(" "),e("a-col",{staticClass:"flr",attrs:{span:"12"}},[e("a-button",{attrs:{type:"default",icon:"left"},on:{click:t.back}},[t._v("返回")])],1)],1),t._v(" "),e("a-row",{staticStyle:{padding:"20px 0",position:"relative",background:"#fff",overflow:"auto",height:"calc(100vh - 200px)"},attrs:{justify:"center"}},[e("a-col",{attrs:{span:"18",push:"3"}},[e("a-form",[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"产品名称：",validateStatus:t.saveFlag?"success":t.paramsObj.title?"success":"error",help:t.saveFlag?"":t.paramsObj.title?"":"请输入产品名称"}},[e("a-input",{attrs:{placeholder:"请输入产品名称",maxlength:"15"},model:{value:t.paramsObj.title,callback:function(a){t.$set(t.paramsObj,"title",a)},expression:"paramsObj.title"}})],1),t._v(" "),e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"货号：",validateStatus:t.saveFlag?"success":t.paramsObj.item_number?"success":"error",help:t.saveFlag?"":t.paramsObj.item_number?"":"请输入产品货号"}},[e("a-input",{attrs:{placeholder:"请输入产品货号",maxlength:"30"},model:{value:t.paramsObj.item_number,callback:function(a){t.$set(t.paramsObj,"item_number",a)},expression:"paramsObj.item_number"}})],1),t._v(" "),e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"产品类别：",validateStatus:t.saveFlag?"success":t.paramsObj.class_id?"success":"error",help:t.saveFlag?"":t.paramsObj.class_id?"":"请选择产品类别"}},[e("a-select",{staticStyle:{width:"150px","margin-right":"20px"},attrs:{placeholder:"请选择类别"},on:{change:t.selChange},model:{value:t.paramsObj.class_id,callback:function(a){t.$set(t.paramsObj,"class_id",a)},expression:"paramsObj.class_id"}},t._l(t.selectList,function(a,s){return e("a-select-option",{key:a.id},[t._v(t._s(a.title))])}),1)],1),t._v(" "),e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"产品价格：",validateStatus:t.saveFlag?"success":t.paramsObj.price?"success":"error",help:t.saveFlag?"":t.paramsObj.price?"":"请输入产品价格"}},[e("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入产品价格（元）"},model:{value:t.paramsObj.price,callback:function(a){t.$set(t.paramsObj,"price",a)},expression:"paramsObj.price"}})],1),t._v(" "),e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"产品图片：",validateStatus:t.saveFlag?"success":t.fileList.length>0?"success":"error",help:t.saveFlag?"":t.fileList.length>0?"":"请上传产品图片"}},[e("a-upload-dragger",{attrs:{name:"file",headers:t.headers,listType:"picture-card",beforeUpload:t.beforeUpload,multiple:!0,showUploadList:!1,action:"/index.php?r=uc/user/upload"},on:{change:t.handleChange}},[e("p",{staticClass:"ant-upload-drag-icon"},[e("a-icon",{attrs:{type:"inbox"}})],1),t._v(" "),e("p",{staticClass:"ant-upload-text"},[t._v("点击或将文件拖拽到这里上传图片(文件大小不能超过1M,支持文件类型jpg,png)")])])],1),t._v(" "),e("div",{staticClass:"clearfix ant-upload-list ant-upload-list-picture-card"},[t._l(t.fileList,function(a,s){return e("div",{key:a.id,staticClass:"ant-upload-list-item ant-upload-list-item-done"},[e("div",{staticClass:"ant-upload-list-item-info"},[e("span",[e("a",{staticClass:"ant-upload-list-item-thumbnail",attrs:{href:"javascript:void(0)",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:a,alt:a}})])])]),t._v(" "),e("span",{staticClass:"ant-upload-list-item-actions"},[e("a",{attrs:{href:"javascript:void(0)"}},[e("a-icon",{attrs:{type:"eye"},on:{click:function(e){return t.handlePreview(a)}}})],1),t._v(" "),e("a-icon",{attrs:{type:"delete"},on:{click:function(a){return t.deleteFn(s)}}})],1)])}),t._v(" "),t.loading?e("div",{staticClass:"ant-upload-list-item ant-upload-list-item-done"},[e("a-icon",{staticClass:"loading",attrs:{type:"loading"}})],1):t._e()],2)],1)],1),t._v(" "),e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:"18",push:"3"}},[e("a-row",[e("a-col",{attrs:{span:"5"}}),t._v(" "),e("a-col",{attrs:{span:"12"}},[e("a-button",{attrs:{type:"primary"},on:{click:function(a){return t.save()}}},[t._v("保存")]),t._v(" "),e("a-button",{on:{click:t.back}},[t._v("取消")])],1)],1)],1)],1),t._v(" "),e("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.cancel}},[e("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.mediapath}})])],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},2210:function(t,a,e){var s=e(1729);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e(16)("6e6a1e9b",s,!1)},2211:function(t,a,e){var s=e(1730);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e(16)("04ba4847",s,!1)}});