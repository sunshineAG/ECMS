webpackJsonp([23],{1230:function(t,e,a){a(2168),a(2167);var n=a(20)(a(1637),a(2088),"data-v-0fc8745a",null);n.options.__file="D:\\baozWork\\liejing\\js\\ECMS\\src\\view\\pushMange\\blackList.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] blackList.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},1252:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxKSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDxlbGxpcHNlIGZpbGw9IiNGNUY1RjUiIGN4PSIzMiIgY3k9IjMzIiByeD0iMzIiIHJ5PSI3Ii8+CiAgICA8ZyBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0iI0Q5RDlEOSI+CiAgICAgIDxwYXRoIGQ9Ik01NSAxMi43Nkw0NC44NTQgMS4yNThDNDQuMzY3LjQ3NCA0My42NTYgMCA0Mi45MDcgMEgyMS4wOTNjLS43NDkgMC0xLjQ2LjQ3NC0xLjk0NyAxLjI1N0w5IDEyLjc2MVYyMmg0NnYtOS4yNHoiLz4KICAgICAgPHBhdGggZD0iTTQxLjYxMyAxNS45MzFjMC0xLjYwNS45OTQtMi45MyAyLjIyNy0yLjkzMUg1NXYxOC4xMzdDNTUgMzMuMjYgNTMuNjggMzUgNTIuMDUgMzVoLTQwLjFDMTAuMzIgMzUgOSAzMy4yNTkgOSAzMS4xMzdWMTNoMTEuMTZjMS4yMzMgMCAyLjIyNyAxLjMyMyAyLjIyNyAyLjkyOHYuMDIyYzAgMS42MDUgMS4wMDUgMi45MDEgMi4yMzcgMi45MDFoMTQuNzUyYzEuMjMyIDAgMi4yMzctMS4zMDggMi4yMzctMi45MTN2LS4wMDd6IiBmaWxsPSIjRkFGQUZBIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"},1253:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"dataStatus",props:["width","height","material"],components:{},data:function(){return{}}}},1254:function(t,e,a){e=t.exports=a(15)(!1),e.push([t.i,"\n.imgBg[data-v-6c09838e]{\n    opacity:1;\n    text-align:center;\n    position:relative;\n}\n.text[data-v-6c09838e]{\n    position:absolute;\n    left:50%;\n    bottom:44px;\n    color:#ccc;\n    transform: translateX(-50%);\n}\n.matText[data-v-6c09838e]{\n    position:absolute;\n    left:50%;\n    bottom:86px;\n    color:#00000073;\n    transform: translateX(-50%);\n}\n",""])},1255:function(t,e,a){a(1257);var n=a(20)(a(1253),a(1256),"data-v-6c09838e",null);n.options.__file="D:\\baozWork\\liejing\\js\\ECMS\\src\\components\\pageConfig\\dataStatus.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] dataStatus.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},1256:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"imgBg"},[n("svg",{staticStyle:{"text-align":"center"},attrs:{width:t.width,height:t.height}},[n("image",{attrs:{"xlink:href":a(1252),width:"100%"}})]),t._v(" "),t.material?t._e():n("span",{staticClass:"text"},[t._v("暂无数据")]),t._v(" "),t.material?n("span",{staticClass:"matText"},[t._v("暂不支持")]):t._e()])},staticRenderFns:[]},t.exports.render._withStripped=!0},1257:function(t,e,a){var n=a(1254);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(16)("4232382d",n,!1)},1637:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(54),i=a.n(n),s=a(1255),o=a.n(s);a(94);e.default={name:"",components:{dataStatus:o.a},data:function(){return{selectTab:"1",blackSetting:{},msg_keyword:"",nickname_keyword:"",nickname:"",blackList:[]}},mounted:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},updated:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},methods:{tabChange:function(t){switch(this.selectTab=t,this.selectTab){case"1":this.getBlackSetting();break;case"2":this.nickname="",this.getBlackList()}},delAll:function(t){if(1==t){if(0==this.blackSetting.msg_keyword.length)return void this.$message.warning("无删除项")}else if(2==t&&0==this.blackSetting.nickname_keyword.length)return void this.$message.warning("无删除项");var e=this;this.$confirm({title:"确定全部删除？",onOk:function(){var a=void 0;1==t?a={black_setting_id:e.blackSetting.id,msg_keyword:"1",del:1,del_all:1}:2==t&&(a={black_setting_id:e.blackSetting.id,nickname_keyword:"2",del:1,del_all:1}),e.$axios({method:"POST",url:"/index.php?r=uc/sale/black-list-setting-update",data:a}).then(function(a){1==a.data.status&&(1==t?e.blackSetting.msg_keyword=[]:2==t&&(e.blackSetting.nickname_keyword=[]),e.$message.success("删除成功"))})}})},delAllName:function(){if(0==this.blackList.length)return void this.$message.warning("无昵称可删除");var t=this;this.$confirm({title:"确定全部删除？",onOk:function(){t.$axios({method:"POST",url:"/index.php?r=uc/sale/black-list-update",data:{department_id:t.$store.state.user.user.department.id,del_all:1,del:1,nickname:"1"}}).then(function(e){1==e.data.status&&(t.blackList=[],t.$message.success("删除成功"))})}})},addBlackName:function(){var t=this;""!=this.nickname&&this.$axios({method:"POST",url:"/index.php?r=uc/sale/black-list-update",data:{department_id:this.$store.state.user.user.department.id,nickname:this.nickname}}).then(function(e){1==e.data.status&&(t.blackList.unshift(t.nickname),t.nickname="")})},saveKeyWord:function(t){var e=this,a=void 0;if(1==t){if(""==this.msg_keyword)return;a={black_setting_id:this.blackSetting.id,msg_keyword:this.msg_keyword}}else if(2==t){if(""==this.nickname_keyword)return;a={black_setting_id:this.blackSetting.id,nickname_keyword:this.nickname_keyword}}this.$axios({method:"POST",url:"/index.php?r=uc/sale/black-list-setting-update",data:a}).then(function(a){var n=a.data;1==n.status&&(1==t?(e.blackSetting.msg_keyword.unshift(e.msg_keyword),e.msg_keyword=""):2==t&&(e.blackSetting.nickname_keyword.unshift(e.nickname_keyword),e.nickname_keyword=""),e.$message.success(n.msg))})},closeTag:function(t,e,a){var n=this;t.preventDefault(),this.$axios({method:"POST",url:"/index.php?r=uc/sale/black-list-setting-update",data:{black_setting_id:this.blackSetting.id,msg_keyword:e,del:"1"}}).then(function(t){var e=t.data;1==e.status&&(n.blackSetting.msg_keyword.splice(a,1),n.$message.success(e.msg))})},closeTagName:function(t,e,a){var n=this;t.preventDefault(),this.$axios({method:"POST",url:"/index.php?r=uc/sale/black-list-setting-update",data:{black_setting_id:this.blackSetting.id,nickname_keyword:e,del:"1"}}).then(function(t){var e=t.data;1==e.status&&(n.blackSetting.nickname_keyword.splice(a,1),n.$message.success(e.msg))})},close:function(t,e,a){var n=this;t.preventDefault(),this.$axios({method:"POST",url:"/index.php?r=uc/sale/black-list-update",data:{department_id:this.$store.state.user.user.department.id,nickname:e,del:"1"}}).then(function(t){var e=t.data;1==e.status&&(n.blackList.splice(a,1),n.$message.success(e.msg))})},getBlackSetting:function(){var t=this;this.$axios({method:"POST",url:"/index.php?r=uc/sale/black-list-setting",data:{department_id:this.$store.state.user.user.department.id}}).then(function(e){var a=e.data;1==a.status&&(a.data.auto_pass_ban_b="1"==a.data.auto_pass_ban_b,a.data.black_talk_b="1"==a.data.black_talk_b,a.data.business_card_b="1"==a.data.business_card_b,a.data.department_id="1"==a.data.department_id,a.data.link_b="1"==a.data.link_b,a.data.msg_keyword_b="1"==a.data.msg_keyword_b,a.data.nickname_keyword_b="1"==a.data.nickname_keyword_b,a.data.room_auto_remove_b="1"==a.data.room_auto_remove_b,a.data.room_ban_b="1"==a.data.room_ban_b,a.data.text_num_b="1"==a.data.text_num_b,a.data.text_num=parseInt(a.data.text_num),t.blackSetting=a.data)})},save:function(){var t=this,e=JSON.parse(i()(this.blackSetting));e.black_setting_id=e.id,e.auto_pass_ban_b=1==e.auto_pass_ban_b?"1":"0",e.black_talk_b=1==e.black_talk_b?"1":"0",e.business_card_b=1==e.business_card_b?"1":"0",e.department_id=1==e.department_id?"1":"0",e.link_b=1==e.link_b?"1":"0",e.msg_keyword_b=1==e.msg_keyword_b?"1":"0",e.nickname_keyword_b=1==e.nickname_keyword_b?"1":"0",e.room_auto_remove_b=1==e.room_auto_remove_b?"1":"0",e.room_ban_b=1==e.room_ban_b?"1":"0",e.text_num_b=1==e.text_num_b?"1":"0",delete e.msg_keyword,delete e.nickname_keyword,this.$axios({method:"POST",url:"/index.php?r=uc/sale/black-list-setting-update",data:e}).then(function(e){1==e.data.status&&t.$message.success("保存成功")})},getBlackList:function(){var t=this;this.$axios({method:"POST",url:"/index.php?r=uc/sale/black-list",data:{department_id:this.$store.state.user.user.department.id,search:this.nickname}}).then(function(e){var a=e.data;1==a.status&&(t.blackList=a.data)})},search:function(){this.getBlackList()}},created:function(){this.getBlackSetting()}}},1686:function(t,e,a){e=t.exports=a(15)(!1),e.push([t.i,"\n.black-list .ant-tabs-bar{\n    border-bottom: 1px solid #f0f2f5;\n}\n",""])},1687:function(t,e,a){e=t.exports=a(15)(!1),e.push([t.i,"\n.black-list[data-v-0fc8745a] {\n  height: calc(100vh - 90px);\n  overflow: auto;\n  background: #ffffff;\n  padding: 25px;\n}\n.black-list *[data-v-0fc8745a] {\n  font-size: 12px!important;\n}\n.black-list p[data-v-0fc8745a] {\n  color: #101010;\n}\n.black-list .item p span[data-v-0fc8745a] {\n  font-weight: 400;\n}\n.black-list .tabs[data-v-0fc8745a] {\n  margin-bottom: 10px;\n}\n.ant-tag[data-v-0fc8745a]:hover {\n  background: #5AA9CD;\n  color: #ffffff;\n  opacity: 1;\n}\n.stausPage[data-v-0fc8745a] {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-25%, -50%);\n}\n",""])},2088:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"black-list"},[a("div",{staticClass:"tabs"},[a("a-tabs",{on:{change:t.tabChange},model:{value:t.selectTab,callback:function(e){t.selectTab=e},expression:"selectTab"}},[a("a-tab-pane",{key:"1",attrs:{tab:"黑名单设置"}}),t._v(" "),a("a-tab-pane",{key:"2",attrs:{tab:"黑名单管理"}})],1)],1),t._v(" "),a("div",[1==t.selectTab?a("div",[a("div",{staticClass:"item"},[a("p",[a("a-checkbox",{model:{value:t.blackSetting.msg_keyword_b,callback:function(e){t.$set(t.blackSetting,"msg_keyword_b",e)},expression:"blackSetting.msg_keyword_b"}},[t._v("消息关键字加黑名单（验证消息内容中的关键字）")])],1),t._v(" "),a("p",{staticStyle:{position:"relative"}},[a("a-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入关键字，并回车保存"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveKeyWord(1)}},model:{value:t.msg_keyword,callback:function(e){t.msg_keyword=e},expression:"msg_keyword"}}),t._v(" "),a("span",{staticStyle:{color:"#5aa9cd",position:"absolute",right:"0",top:"50%",transform:"translateY(-50%)","font-size":"14px!important",cursor:"pointer"},on:{click:function(e){return t.delAll("1")}}},[t._v("全部删除")])],1),t._v(" "),a("p",t._l(t.blackSetting.msg_keyword,function(e,n){return a("a-tag",{key:n,staticStyle:{"margin-bottom":"10px"},attrs:{closable:!0},on:{close:function(a){return t.closeTag(a,e,n)}}},[t._v(t._s(e))])}),1)]),t._v(" "),a("div",{staticClass:"item"},[a("p",[a("a-checkbox",{model:{value:t.blackSetting.nickname_keyword_b,callback:function(e){t.$set(t.blackSetting,"nickname_keyword_b",e)},expression:"blackSetting.nickname_keyword_b"}},[t._v("昵称关键字加黑名单（验证昵称中的关键字）")])],1),t._v(" "),a("p",{staticStyle:{position:"relative"}},[a("a-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入关键字，并回车保存"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveKeyWord(2)}},model:{value:t.nickname_keyword,callback:function(e){t.nickname_keyword=e},expression:"nickname_keyword"}}),t._v(" "),a("span",{staticStyle:{color:"#5aa9cd",position:"absolute",right:"0",top:"50%",transform:"translateY(-50%)","font-size":"14px!important",cursor:"pointer"},on:{click:function(e){return t.delAll("2")}}},[t._v("全部删除")])],1),t._v(" "),a("p",t._l(t.blackSetting.nickname_keyword,function(e,n){return a("a-tag",{key:n,staticStyle:{"margin-bottom":"10px"},attrs:{closable:!0},on:{close:function(a){return t.closeTagName(a,e,n)}}},[t._v(t._s(e))])}),1)]),t._v(" "),a("div",{staticClass:"item"},[a("p",[a("a-checkbox",{model:{value:t.blackSetting.text_num_b,callback:function(e){t.$set(t.blackSetting,"text_num_b",e)},expression:"blackSetting.text_num_b"}},[t._v("消息超出字数加入黑名单")])],1),t._v(" "),a("p",[a("a-input-number",{attrs:{min:10},model:{value:t.blackSetting.text_num,callback:function(e){t.$set(t.blackSetting,"text_num",e)},expression:"blackSetting.text_num"}})],1)]),t._v(" "),a("div",{staticClass:"item"},[a("p",[a("a-checkbox",{model:{value:t.blackSetting.link_b,callback:function(e){t.$set(t.blackSetting,"link_b",e)},expression:"blackSetting.link_b"}},[t._v("发送链接加黑名单")])],1)]),t._v(" "),a("div",{staticClass:"item"},[a("p",[a("a-checkbox",{model:{value:t.blackSetting.business_card_b,callback:function(e){t.$set(t.blackSetting,"business_card_b",e)},expression:"blackSetting.business_card_b"}},[t._v("分享公众号名片或个人名片加黑名单")])],1)]),t._v(" "),a("div",{staticClass:"item"},[a("p",[a("a-checkbox",{model:{value:t.blackSetting.auto_pass_ban_b,callback:function(e){t.$set(t.blackSetting,"auto_pass_ban_b",e)},expression:"blackSetting.auto_pass_ban_b"}},[t._v("拉黑用户不自动通过好友申请")])],1)]),t._v(" "),a("div",{staticClass:"item"},[a("p",[a("a-checkbox",{model:{value:t.blackSetting.room_ban_b,callback:function(e){t.$set(t.blackSetting,"room_ban_b",e)},expression:"blackSetting.room_ban_b"}},[t._v("拉黑用户限制入群（已踢出群聊/裂变活动群）")])],1)]),t._v(" "),a("div",{staticClass:"item"},[a("p",[a("a-checkbox",{model:{value:t.blackSetting.room_auto_remove_b,callback:function(e){t.$set(t.blackSetting,"room_auto_remove_b",e)},expression:"blackSetting.room_auto_remove_b"}},[t._v("自动踢出群聊")])],1),t._v(" "),a("p",{staticStyle:{"padding-left":"50px"}},[a("a-radio-group",{model:{value:t.blackSetting.room_auto_remove_way,callback:function(e){t.$set(t.blackSetting,"room_auto_remove_way",e)},expression:"blackSetting.room_auto_remove_way"}},[a("a-radio",{attrs:{value:"0"}},[t._v("警告后二次触犯踢出")]),t._v(" "),a("a-radio",{attrs:{value:"1"}},[t._v("直接踢出")])],1)],1)]),t._v(" "),a("div",{staticClass:"item"},[a("p",[a("a-checkbox",{model:{value:t.blackSetting.black_talk_b,callback:function(e){t.$set(t.blackSetting,"black_talk_b",e)},expression:"blackSetting.black_talk_b"}},[t._v("触犯拉黑规则提醒话术（仅限机器人所在群聊）")])],1),t._v(" "),a("p",{staticStyle:{"padding-left":"50px"}},[0==t.blackSetting.room_auto_remove_way?a("a-textarea",{staticStyle:{width:"50%","margin-bottom":"20px"},attrs:{placeholder:"请输入第一次警告话术",autosize:{minRows:4,maxRows:6}},model:{value:t.blackSetting.warn_talk,callback:function(e){t.$set(t.blackSetting,"warn_talk",e)},expression:"blackSetting.warn_talk"}}):t._e(),t._v(" "),a("a-textarea",{staticStyle:{width:"50%","margin-bottom":"20px"},attrs:{placeholder:"请输入踢出群聊后的话术",autosize:{minRows:4,maxRows:6}},model:{value:t.blackSetting.remove_talk,callback:function(e){t.$set(t.blackSetting,"remove_talk",e)},expression:"blackSetting.remove_talk"}})],1)]),t._v(" "),a("div",[a("div",{staticStyle:{"padding-left":"50px"}},[a("div",{staticStyle:{width:"50%","text-align":"right"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v("保存")])],1)])])]):t._e(),t._v(" "),2==t.selectTab?a("div",[a("div",{staticStyle:{position:"relative","margin-bottom":"20px"}},[a("a-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入用户昵称"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveKeyWord(1)}},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),t._v(" "),a("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(e){return t.search()}}},[t._v("搜索")]),t._v(" "),a("a-button",{staticStyle:{"margin-left":"20px"},on:{click:function(e){return t.addBlackName()}}},[t._v("手动增加")]),t._v(" "),a("span",{staticStyle:{color:"#5aa9cd",position:"absolute",right:"0",top:"50%",transform:"translateY(-50%)","font-size":"14px!important",cursor:"pointer"},on:{click:function(e){return t.delAllName()}}},[t._v("全部删除")])],1),t._v(" "),a("div",t._l(t.blackList,function(e,n){return a("a-tag",{key:n,staticStyle:{"margin-bottom":"10px"},attrs:{closable:!0},on:{close:function(a){return t.close(a,e,n)}}},[t._v(t._s(e))])}),1),t._v(" "),t.blackList.length?t._e():a("data-status",{staticClass:"stausPage",attrs:{width:200,hieght:330}})],1):t._e()])])},staticRenderFns:[]},t.exports.render._withStripped=!0},2167:function(t,e,a){var n=a(1686);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(16)("3db47100",n,!1)},2168:function(t,e,a){var n=a(1687);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(16)("3c8a7dee",n,!1)}});