webpackJsonp([49],{1246:function(t,e,a){a(2247);var n=a(20)(a(1653),a(2145),"data-v-cb64ead2",null);n.options.__file="D:\\baozWork\\liejing\\js\\ECMS\\src\\view\\systemManage\\personalSetting.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] personalSetting.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},1653:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=a(4),i=a.n(s),o=a(54),l=a.n(o),r=(a(94),a(32));e.default=(n={name:"monitorSetting",data:function(){return{personalItem:{new_msg_audio_status:!1,busy_auto_reply_status:!1,busy_auto_reply:"",busy_auto_reply_image:"",offline_auto_reply_status:!1,offline_auto_reply:"",offline_auto_reply_image:""},headers:{Authorization:r.store.get("token")}}},mounted:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},updated:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},computed:{},methods:{handleChange1:function(t){if("uploading"===t.file.status)return void(this.loading=!0);"done"===t.file.status?1==t.file.response.status?(this.personalItem.busy_auto_reply_image=t.file.response.data.path,this.loading=!1):this.$notification.warning({message:"上传错误",description:t.file.response.msg}):"error"===t.file.status&&this.$notification.warning({message:"上传失败",description:"文件"+t.file.name+"上传失败"})},handleChange2:function(t){if("uploading"===t.file.status)return void(this.loading=!0);"done"===t.file.status?1==t.file.response.status?(this.personalItem.offline_auto_reply_image=t.file.response.data.path,this.loading=!1):this.$notification.warning({message:"上传错误",description:t.file.response.msg}):"error"===t.file.status&&this.$notification.warning({message:"上传失败",description:"文件"+t.file.name+"上传失败"})},beforeUpload:function(t){var e="image/jpeg"===t.type||("image/png"===t.type||"image/jpg"===t.type);e||this.$notification.warning({message:"文件格式不正确",description:"文件格式不正确，请选择JPG或PNG。"});var a=t.size/1024/1024<1;return a||(this.$notification.warning({message:"超出文件大小限制",description:"图像不能大于1MB！"}),this.$message.error("图像不能大于1MB！")),e&&a},deleteFn:function(t,e){t.stopPropagation(),"1"==e?this.personalItem.busy_auto_reply_image="":this.personalItem.offline_auto_reply_image=""},getPersonalInfo:function(){var t=this;this.$axios({method:"POST",url:"/index.php?r=uc/system/get-user-setting-info",data:this.personalItem}).then(function(e){var a=e.data;1==a.status&&0!=a.data&&(a.data.new_msg_audio_status="1"==a.data.new_msg_audio_status,a.data.busy_auto_reply_status="1"==a.data.busy_auto_reply_status,a.data.offline_auto_reply_status="1"==a.data.offline_auto_reply_status,t.personalItem=a.data)})},save:function(){var t=this,e=JSON.parse(l()(this.personalItem));e.new_msg_audio_status=e.new_msg_audio_status?"1":"0",e.busy_auto_reply_status=e.busy_auto_reply_status?"1":"0",e.offline_auto_reply_status=e.offline_auto_reply_status?"1":"0",this.$axios({method:"POST",url:"/index.php?r=uc/system/edit-user-setting",data:e}).then(function(a){if(1==a.data.status){var n=JSON.parse(l()(t.$store.state.user.user));n.new_msg_audio_status=e.new_msg_audio_status,t.$store.commit("user/setUser",n),t.$message.success("保存成功"),t.getPersonalInfo()}})}},created:function(){this.getPersonalInfo()}},i()(n,"mounted",function(){}),i()(n,"beforeUpdate",function(){}),n)},1766:function(t,e,a){e=t.exports=a(15)(!1),e.push([t.i,"\n.personal-setting[data-v-cb64ead2] {\n  height: calc(100vh - 90px);\n  overflow-y: auto;\n  background: #fff;\n}\n.personal-setting .set-title[data-v-cb64ead2] {\n  padding: 20px;\n  border-bottom: 1px solid #E9E9E9;\n  color: #101010;\n}\n.personal-setting .set-content[data-v-cb64ead2] {\n  padding: 20px;\n}\n.up-content[data-v-cb64ead2] {\n  display: inline-block;\n  vertical-align: middle;\n  position: relative;\n}\n.up-content .up-img-content[data-v-cb64ead2] {\n  position: absolute;\n  top: 1px;\n  left: 1px;\n  right: 9px;\n  bottom: 9px;\n  background: #ffffff;\n}\n.up-content .up-img-content img[data-v-cb64ead2] {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  vertical-align: top;\n  position: relative;\n}\n.up-content .up-img-modal[data-v-cb64ead2] {\n  position: absolute;\n  top: 1px;\n  left: 1px;\n  right: 9px;\n  bottom: 9px;\n  z-index: 10;\n  visibility: hidden;\n}\n.up-content .up-img-modal .img-btn1[data-v-cb64ead2] {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 10;\n  left: 20%;\n  font-size: 20px;\n}\n.up-content .up-img-modal .img-btn2[data-v-cb64ead2] {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 10;\n  left: 65%;\n  font-size: 20px;\n}\n.up-content:hover .up-img-modal[data-v-cb64ead2] {\n  background: rgba(250, 250, 250, 0.51);\n  visibility: visible;\n}\n",""])},2145:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"personal-setting"},[a("div",{staticClass:"set-title"},[t._v("\n\t\t系统 / 个人设置\n\t")]),t._v(" "),a("div",{staticClass:"set-content"},[a("div",{staticStyle:{"font-size":"16px",color:"#101010"}},[t._v("\n\t\t\t通知\n\t\t")]),t._v(" "),a("div",{staticStyle:{padding:"20px 0"}},[a("a-switch",{attrs:{size:"small"},model:{value:t.personalItem.new_msg_audio_status,callback:function(e){t.$set(t.personalItem,"new_msg_audio_status",e)},expression:"personalItem.new_msg_audio_status"}}),t._v(" "),a("span",{staticStyle:{display:"inline-block","vertical-align":"middle","margin-left":"10px"}},[t._v("新消息提示音")])],1),t._v(" "),a("div",{staticStyle:{"font-size":"16px",color:"#101010"}},[t._v("\n\t\t\t自动回复设置\n\t\t")]),t._v(" "),a("div",{staticStyle:{padding:"20px 0"}},[a("div",[a("a-switch",{attrs:{size:"small"},model:{value:t.personalItem.busy_auto_reply_status,callback:function(e){t.$set(t.personalItem,"busy_auto_reply_status",e)},expression:"personalItem.busy_auto_reply_status"}}),t._v(" "),a("span",{staticStyle:{display:"inline-block","vertical-align":"middle","margin-left":"10px"}},[t._v("账号忙碌时自动回复（100字以内）")])],1),t._v(" "),a("div",{staticStyle:{padding:"20px"}},[a("a-textarea",{staticStyle:{width:"50%",height:"102px","vertical-align":"top","margin-right":"10px"},attrs:{placeholder:"请输入自动回复内容",autosize:"",maxlength:100},model:{value:t.personalItem.busy_auto_reply,callback:function(e){t.$set(t.personalItem,"busy_auto_reply",e)},expression:"personalItem.busy_auto_reply"}}),t._v(" "),a("a-upload",{staticClass:"up-content",attrs:{name:"file",headers:t.headers,listType:"picture-card",showUploadList:!1,beforeUpload:t.beforeUpload,action:"/index.php?r=uc/user/upload"},on:{change:t.handleChange1}},[a("div",[a("a-icon",{staticStyle:{fontSize:"20px"},attrs:{type:"plus"}}),t._v(" "),a("div",{staticClass:"ant-upload-text"},[t._v("上传图片")])],1),t._v(" "),""!=t.personalItem.busy_auto_reply_image?a("div",{staticClass:"up-img-content"},[a("img",{attrs:{src:t.personalItem.busy_auto_reply_image,alt:""}})]):t._e(),t._v(" "),""!=t.personalItem.busy_auto_reply_image?a("div",{staticClass:"up-img-modal"},[a("a-icon",{staticClass:"img-btn1",attrs:{type:"form"}}),t._v(" "),a("a-icon",{staticClass:"img-btn2",attrs:{type:"delete"},on:{click:function(e){return t.deleteFn(e,"1")}}})],1):t._e()])],1),t._v(" "),a("div",[a("a-switch",{attrs:{size:"small"},model:{value:t.personalItem.offline_auto_reply_status,callback:function(e){t.$set(t.personalItem,"offline_auto_reply_status",e)},expression:"personalItem.offline_auto_reply_status"}}),t._v(" "),a("span",{staticStyle:{display:"inline-block","vertical-align":"middle","margin-left":"10px"}},[t._v("账号离线时自动回复（100字以内）")])],1),t._v(" "),a("div",{staticStyle:{padding:"20px"}},[a("a-textarea",{staticStyle:{width:"50%",height:"102px","vertical-align":"top","margin-right":"10px"},attrs:{placeholder:"请输入自动回复内容",autosize:"",maxlength:100},model:{value:t.personalItem.offline_auto_reply,callback:function(e){t.$set(t.personalItem,"offline_auto_reply",e)},expression:"personalItem.offline_auto_reply"}}),t._v(" "),a("a-upload",{staticClass:"up-content",attrs:{name:"file",headers:t.headers,listType:"picture-card",showUploadList:!1,beforeUpload:t.beforeUpload,action:"/index.php?r=uc/user/upload"},on:{change:t.handleChange2}},[a("div",[a("a-icon",{staticStyle:{fontSize:"20px"},attrs:{type:"plus"}}),t._v(" "),a("div",{staticClass:"ant-upload-text"},[t._v("上传图片")])],1),t._v(" "),""!=t.personalItem.offline_auto_reply_image?a("div",{staticClass:"up-img-content"},[a("img",{attrs:{src:t.personalItem.offline_auto_reply_image,alt:""}})]):t._e(),t._v(" "),""!=t.personalItem.offline_auto_reply_image?a("div",{staticClass:"up-img-modal"},[a("a-icon",{staticClass:"img-btn1",attrs:{type:"form"}}),t._v(" "),a("a-icon",{staticClass:"img-btn2",attrs:{type:"delete"},on:{click:function(e){return t.deleteFn(e,"2")}}})],1):t._e()])],1)]),t._v(" "),a("div",{staticStyle:{"margin-left":"20px"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v("保存")]),t._v(" "),a("a-button",{on:{click:function(e){return t.getPersonalInfo()}}},[t._v("取消")])],1)])])},staticRenderFns:[]},t.exports.render._withStripped=!0},2247:function(t,e,a){var n=a(1766);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(16)("142d29e4",n,!1)}});